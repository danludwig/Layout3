(function(){"use strict";var t=function(t){t=t||{};var e={},n=function(t,e){t.replace(/\S+/g,e)},r=function(e,n){Object.defineProperty(t,e,{value:n,enumerable:false,writable:false,configurable:false})};r("on",function(r,i){if(typeof i!="function")return t;n(r,function(t,n){(e[t]=e[t]||[]).push(i);i.typed=n>0});return t});r("off",function(r,i){if(r=="*")e={};else{n(r,function(t){if(i){var n=e[t];for(var r=0,f;f=n&&n[r];++r){if(f==i)n.splice(r--,1)}}else delete e[t]})}return t});r("one",function(e,n){function r(){t.off(e,r);var i=arguments.length;var f=new Array(i);for(var o=0;o<i;o++){f[o]=arguments[o]}n.apply(t,f)}return t.on(e,r)});r("trigger",function(r){var i=arguments.length-1;var f=new Array(i);for(var o=0;o<i;o++){f[o]=arguments[o+1]}n(r,function(n){var r=(e[n]||[]).slice(0);for(var i=0,o;o=r[i];++i){if(o.busy)return;o.busy=1;try{o.apply(t,o.typed?[n].concat(f):f)}catch(u){}if(r[i]!==o){i--}o.busy=0}if(e.all&&n!="all")t.trigger.apply(t,["all",n].concat(f))});return t});return t};var e=/^.+?\/+[^\/]+/,n="EventListener",r="remove"+n,i="add"+n,f="hasAttribute",o="replace",u="popstate",a="trigger",c=window,s=document,l=c.history.location||c.location,h=A.prototype,p=s&&s.ontouchstart?"touchstart":"click",v=false,d=t(),y,g,m,b;function w(t){return t.split(/[\/?#]/)}function $(t,e){var n=new RegExp("^"+e[o](/\*/g,"([^/?#]+?)")[o](/\.\./,".*")+"$"),r=t.match(n);if(r)return r.slice(1)}function A(){this.$=[];t(this);d.on("stop",this.s.bind(this));d.on("emit",this.e.bind(this))}function x(t){return t[o](/^\/|\/$/,"")}function K(t){return(t||l.href)[o](e,"")}function N(t){return y[0]=="#"?(t||l.href).split(y)[1]||"":K(t)[o](y,"")}function E(t){var e=N();if(t||e!=g){d[a]("emit",e);g=e}}function O(t){if(t.which!=1||t.metaKey||t.ctrlKey||t.shiftKey||t.defaultPrevented)return;var n=t.target;while(n&&n.nodeName!="A")n=n.parentNode;if(!n||n.nodeName!="A"||n[f]("download")||!n[f]("href")||n.target&&n.target!="_self"||n.href.indexOf(l.href.match(e)[0])==-1)return;if(n.href!=l.href){if(n.href.split("#")[0]==l.href.split("#")[0])return;P(N(n.href),n.title||s.title)}t.preventDefault()}function P(t,e){e=e||s.title;history.pushState(null,e,y+t);s.title=e;E()}h.m=function(t,e){if(t[0]&&(!e||e[0]))P(t,e);else if(e)this.r(t,e);else this.r("@",t)};h.s=function(){this.off("*");this.$=[]};h.e=function(t){this.$.concat("@").some(function(e){var n=(e=="@"?m:b)(x(t),x(e));if(n){this[a].apply(null,[e].concat(n));return true}},this)};h.r=function(t,e){if(t!="@")this.$.push(t);this.on(t,e)};var S=new A;var j=S.m.bind(S);j.create=function(){var t=new A;t.m.stop=t.s.bind(t);return t.m.bind(t)};j.base=function(t){y=t||"#";g=N()};j.exec=function(){E(true)};j.parser=function(t,e){if(!t&&!e){m=w;b=$}if(t)m=t;if(e)b=e};j.query=function(){var t={};l.href[o](/[?&](.+?)=([^&]*)/g,function(e,n,r){t[n]=r});return t};j.stop=function(){if(v){c[r](u,E);s[r](p,O);d[a]("stop");v=false}};j.start=function(){if(!v){c[i](u,E);s[i](p,O);v=true}};j.base();j.parser();window.route=j})();