define(["require","exports","./Spinner"],function(n,t,i){var r=i,u=function(){function n(){var n=this;this.pageSize=ko.observable(),this.pageNumber=ko.observable(),this.transitionedPageNumber=ko.observable(),this.itemTotal=ko.observable(),this.nextForceDisabled=ko.observable(!1),this.prevForceDisabled=ko.observable(!1),this.items=ko.observableArray(),this.orderBy=ko.observable(),this.keyword=ko.observable($('input[type=hidden][data-bind="value: keyword"]').val()),this.spinner=new r.Spinner(new r.SpinnerOptions(400,!0)),this.pageCount=ko.computed(function(){return Math.ceil(n.itemTotal()/n.pageSize())}),this.pageIndex=ko.computed(function(){return parseInt(n.transitionedPageNumber())-1}),this.firstIndex=ko.computed(function(){return n.pageIndex()*n.pageSize()}),this.firstNumber=ko.computed(function(){return n.firstIndex()+1}),this.lastNumber=ko.computed(function(){return n.items?n.firstIndex()+n.items().length:0}),this.lastIndex=ko.computed(function(){return n.lastNumber()-1}),this.nextEnabled=ko.computed(function(){return n.pageNumber()<n.pageCount()&&!n.nextForceDisabled()}),this.prevEnabled=ko.computed(function(){return n.pageNumber()>1&&!n.prevForceDisabled()}),this.pageCount.subscribe(function(t){n.pageNumber()&&n.pageNumber()>t&&n.pageNumber(1)}),this.hasItems=ko.computed(function(){return n.items()&&n.items().length>0}),this.hasManyItems=ko.computed(function(){return n.lastNumber()>n.firstNumber()}),this.hasNoItems=ko.computed(function(){return!n.spinner.isVisible()&&!n.hasItems()}),this.hasManyPages=ko.computed(function(){return n.pageCount()>1}),this.showStatus=ko.computed(function(){return n.hasItems()&&!n.spinner.isVisible()}),this.throttledKeyword=ko.computed(this.keyword).extend({throttle:400})}return n.prototype.nextPage=function(){if(this.nextEnabled()){var n=parseInt(this.pageNumber())+1;this.pageNumber(n)}},n.prototype.prevPage=function(){this.prevEnabled()&&history.back()},n.prototype.getPageHash=function(n){return"#/page/{0}/".replace("{0}",n)},n}();t.PagedSearch=u})