define(["require","exports"],function(n,t){function e(n){n.text()?(window.clearInterval(r),i=9,n.tickCount(i),r=window.setInterval(function(){o(n)},1e3),n.isDismissing(!1),n.isDismissed(!1),n.$element.hide().removeClass("hide").fadeIn("fast")):(n.isDismissed(!0),n.isDismissing(!1),r&&window.clearInterval(r),n.$element&&n.$element.addClass("hide"))}function o(n){i<=0?(i=0,window.clearInterval(r),n.dismiss()):--i,n.tickCount(i)}var i,r,u=function(){function n(){var n=this;this.text=ko.observable(),this.tickCount=ko.observable(9),this.isDismissing=ko.observable(),this.isDismissed=ko.observable(),this.$element=undefined,ko.computed(function(){e(n)})}return n.prototype.flash=function(n){this.text(undefined),n&&this.text(n)},n.prototype.dismiss=function(){var n=this;this.isDismissing(!0),this.$element.fadeOut("slow",function(){n.text(""),n.$element.addClass("hide")})},n}(),f;t.Flasher=u,t.flasher=new u,f=function(){function n(){var n=this;this.text=ko.computed(function(){return t.flasher.text()}),this.isVisible=ko.computed(function(){return t.flasher.isDismissing()||t.flasher.isDismissed()?!1:n.text()})}return n.prototype.dismiss=function(){t.flasher.dismiss()},n}(),t.FlasherProxy=f})